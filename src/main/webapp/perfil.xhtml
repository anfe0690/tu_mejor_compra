<ui:composition template="WEB-INF/layout/layout.xhtml"
				xmlns="http://www.w3.org/1999/xhtml"
				xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
				xmlns:h="http://xmlns.jcp.org/jsf/html"
				xmlns:f="http://xmlns.jcp.org/jsf/core"
				xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
	<ui:define name="title">Perfil</ui:define>
	<ui:define name="css">
		<h:outputStylesheet library="css" name="perfil.css"/>
	</ui:define>
	<ui:define name="js">
		<h:outputScript library="js" name="perfil.js"/>
	</ui:define>
	<ui:define name="content">

        <section  id="section_perfil" class="tema">
			<h1>Perfil</h1>
			<div>
				<h2>Campos generales</h2>
				<p>Usuario: #{sesionController.usuario.nombre}</p>
				<p>Contacto: #{sesionController.usuario.nombreContacto}</p>
				<p>Correo: #{sesionController.usuario.correo}</p>
				<p>Telefonos: #{sesionController.usuario.telefonos}</p>
			</div>
			<div>
				<h2>Campos de comprador</h2>
				<p>Ciudad: #{sesionController.usuario.ciudad}</p>
				<p>Direccion: #{sesionController.usuario.direccion}</p>
			</div>
			<div>
				<h2>Campos de vendedor</h2>
				<p>Banco: #{sesionController.usuario.banco}</p>
				<p>Numero de cuenta: #{sesionController.usuario.numeroCuenta}</p>
			</div>
		</section>

		<section id="section_mis_productos" class="tema">
			<h1>Mis productos</h1>
			<h:form id="section_mis_productos_form">
				<h:commandButton value="Crear" action="crear_producto"/>
				<h:commandButton value="Eliminar" actionListener="#{misProductos.eliminarProductos()}" id="boton_eliminar"/>
				<h:commandButton value="Restaurar" actionListener="#{misProductos.restaurar()}" id="boton_restaurar"/>
				<br/>
				<h:dataTable id="datatable1" value="#{misProductos.selProductos}" var="selproducto" headerClass="perfil_tabla_titulo">
					<h:column>
						<f:facet name="header">
							<h:outputText value="Seleccion" />
						</f:facet>
						<h:selectBooleanCheckbox id="seleccion" value="#{selproducto.seleccionado}" />
					</h:column>
					<h:column>
						<f:facet name="header">
							<h:outputText value="Imagen" />
						</f:facet>
						<h:graphicImage value="/img/#{sesionController.usuario.nombre}/#{selproducto.producto.nombreImagen}" width="40" height="40"/>
					</h:column>
					<h:column>
						<f:facet name="header">
							<h:outputText value="Nombre" />
						</f:facet>
						<h:outputText value="#{selproducto.producto.nombre}"/>
					</h:column>
					<h:column>
						<f:facet name="header">
							<h:outputText value="Precio" />
						</f:facet>
						<h:outputText value="#{selproducto.producto.precio}"/>
					</h:column>
				</h:dataTable>
			</h:form>
		</section>
		
		<section id="section_compras" class="tema">
			<h1>Mis compras</h1>
			<h:form id="form_compras">
				<h:commandButton id="btn_actualizar" value="Actualizar" action="#{misCompras.actualizar()}"/>
				<br/>
				<h:dataTable id="datatable_compras" value="#{misCompras.filas}" var="fila" headerClass="perfil_tabla_titulo">
					<h:column>
						<f:facet name="header">
							<h:outputText value="Imagen" />
						</f:facet>
						<h:graphicImage value="#{fila.direccionImagen}" width="40" height="40"/>
					</h:column>
					<h:column>
						<f:facet name="header">
							<h:outputText value="Nombre" />
						</f:facet>
						<h:outputText value="#{fila.nombreProducto}"/>
					</h:column>
					<h:column>
						<f:facet name="header">
							<h:outputText value="Estado" />
						</f:facet>
						<h:selectOneMenu rendered="#{fila.estado == 'EN_ENVIO'}" value="#{fila.estado}" >
							<f:selectItem itemLabel="En envio" itemValue="EN_ENVIO"/>
							<f:selectItem itemLabel="Terminado" itemValue="TERMINADO"/>
						</h:selectOneMenu>
						<h:outputText rendered="#{fila.estado != 'EN_ENVIO'}" value="#{fila.estado}" /> 
					</h:column>
				</h:dataTable>
			</h:form>
		</section>

		<section id="section_ventas" class="tema">
			<h1>Mis ventas</h1>
			<h:form id="form_ventas">
				<h:commandButton id="btn_actualizar" value="Actualizar" action="#{misVentas.actualizar()}"/>
				<br/>
				<h:dataTable id="datatable_ventas" value="#{misVentas.filas}" var="fila" headerClass="perfil_tabla_titulo">
					<h:column>
						<f:facet name="header">
							<h:outputText value="Imagen" />
						</f:facet>
						<h:graphicImage value="#{fila.direccionImagen}" width="40" height="40"/>
					</h:column>
					<h:column>
						<f:facet name="header">
							<h:outputText value="Nombre" />
						</f:facet>
						<h:outputText value="#{fila.nombreProducto}"/>
					</h:column>
					<h:column>
						<f:facet name="header">
							<h:outputText value="Estado" />
						</f:facet>
						<h:selectOneMenu rendered="#{fila.estado == 'ESPERANDO_PAGO'}" value="#{fila.estado}">
							<f:selectItem itemLabel="Esperando pago" itemValue="ESPERANDO_PAGO"/>
							<f:selectItem itemLabel="En envio" itemValue="EN_ENVIO"/>
						</h:selectOneMenu>
						<h:outputText rendered="#{fila.estado != 'ESPERANDO_PAGO'}" value="#{fila.estado}"/>
					</h:column>
				</h:dataTable>
			</h:form>
		</section>

	</ui:define>
</ui:composition>