<ui:composition template="WEB-INF/layout/layout.xhtml"
				xmlns="http://www.w3.org/1999/xhtml"
				xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
				xmlns:h="http://xmlns.jcp.org/jsf/html"
				xmlns:f="http://xmlns.jcp.org/jsf/core"
				xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
				xmlns:p="http://primefaces.org/ui">
	<ui:define name="title">Crear producto</ui:define>
	<ui:define name="css">
		<h:outputStylesheet library="css" name="crear_producto.css"/>
	</ui:define>
	<ui:define name="js">
		<h:outputScript library="js" name="crear_producto.js"/>
	</ui:define>
	<ui:define name="content">
		<f:event type="preRenderView" listener="#{sesionBean.redireccionarSinSesion}"/>
		<!-- TODO 099: Agregar estilo de error a los campos que presenten errores -->
		<section class="row">
			<h:form class="col-xs-12 tema b-crear_producto" id="form_crear_producto" enctype="multipart/form-data" >
				<div class="row">
					<h1 class="col-xs-12 titulo-bloque">Crear Producto</h1>
					<div class="col-xs-12">
						<div class="row">
							<div class="col-md-6 control-imagen">
								<div class="contenedor-imagen">
									<h:graphicImage styleClass="imagen" id="imagen" library="images" name="sel-imagen.png" />
								</div>
								<br/>
								<p:message id="error-archivo" for="file" 
										   showSummary="true"
										   showDetail="false"/>

								<div class="altura-linea cont-selector-imagen">
									<h:inputFile styleClass="selector-imagen" id="file" value="#{crearProductoBean.file}"
												 pt:required="required"
												 pt:accept="image/*"
												 validator="#{crearProductoBean.validarImagenProducto}">
										<f:ajax event="change" render="error-archivo" onevent="miAjaxEvent" />
									</h:inputFile>
									<h:graphicImage id="loading-file-gif" library="images" name="ajax-loading.gif" width="25" height="25"
													style="display: none;"/>
								</div>
							</div>
							<div class="col-md-6 control-datos">
								<p class="etiqueta-campo">Nombre de producto <h:graphicImage id="loading-nombre-gif"
																							 library="images" name="ajax-loading.gif"
																							 width="25" height="25" style="display: none;"/></p>
								<p:message id="error-nombre" for="nombre-producto" 
										   showSummary="true" showDetail="false"/>
								<div class="altura-linea espacio-campo">
									<p:inputText styleClass="nombre-producto" id="nombre-producto" value="#{crearProductoBean.nombre}"
												 pt:required="required"
												 pt:placeholder="Nombre de producto"
												 validator="#{crearProductoBean.validarNombreProducto}">
										<f:ajax render="error-nombre" onevent="miAjaxEvent" />
									</p:inputText>
								</div>
								<p class="etiqueta-campo">Precio (Pesos) <h:graphicImage id="loading-precio-gif"
																						 library="images" name="ajax-loading.gif"
																						 width="25" height="25" style="display: none;"/></p>
								<p:message id="error-precio" for="precio-producto" 
										   showSummary="true" showDetail="false"/>
								<div class="altura-linea espacio-campo">
									<p:inputText styleClass="precio-producto" id="precio-producto" value="#{crearProductoBean.precio}"
												 pt:required="required"
												 pt:placeholder="Precio de producto"
												 validator="#{crearProductoBean.validarPrecioProducto}">
										<f:ajax render="error-precio" onevent="miAjaxEvent" />
									</p:inputText>
								</div>
								<p class="etiqueta-campo">Categoria</p>
								<div class="altura-linea">
									<h:selectOneMenu styleClass="categoria" value="#{crearProductoBean.categoria}">
										<f:selectItem itemLabel="Telefono inteligente" itemValue="TELEFONOS_INTELIGENTES"/>
										<f:selectItem itemLabel="Consolas de video juegos" itemValue="CONSOLAS_VIDEO_JUEGOS"/>
										<f:selectItem itemLabel="Tabletas" itemValue="TABLETAS"/>
									</h:selectOneMenu>
								</div>
							</div>
						</div>
					</div>
					<div class="col-xs-12 altura-linea">
						<h:commandButton styleClass="boton-submit" id="boton-crear-producto" value="Crear"
										 action="#{crearProductoBean.crearProducto()}" >
							<f:ajax execute="@form" render="error-archivo error-nombre error-precio" onevent="miAjaxEvent" />
						</h:commandButton>
						<h:graphicImage id="loading-submit-gif" library="images" name="ajax-loading.gif" width="25" height="25"
										style="display: none; margin-left: 10px;"/>
					</div>
				</div>
			</h:form>
		</section>
	</ui:define>
</ui:composition>