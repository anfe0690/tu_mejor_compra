<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
				xmlns:h="http://xmlns.jcp.org/jsf/html"
				xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
				xmlns:f="http://xmlns.jcp.org/jsf/core"
				xmlns:pt="http://xmlns.jcp.org/jsf/passthrough"
				xmlns:p="http://primefaces.org/ui">
	<div class="row">

		<div class="col-xs-12 tema b-sesion">
			<h:form id="form-sesion" >
				<div class="row">
					<c:choose>
						<!-- Iniciar sesion -->
						<c:when test="#{!sesionBean.sesionIniciada}">
							<f:event type="postValidate" listener="#{sesionBean.validarUsuarioContrasena}"/>

							<h:panelGroup layout="block"
										  styleClass="col-md-2 col-md-offset-10 col-lg-2 col-lg-offset-10 contenedor-boton-contrasenas altura-linea">
								<!-- TODO MEJORA: Mostrar contrase単as en un dialogo de Primefaces -->
								<p:button styleClass="boton-contrasenas" id="contrasenas" value="Contrase単as"/>
							</h:panelGroup>
							<h:panelGroup rendered="#{not empty facesContext.getMessageList('form-sesion')}">
								<div class="col-md-12 col-lg-4 alinear-centro altura-linea">
									<p:message id="msg-form-sesion" for="form-sesion" />
								</div>
								<div class="col-md-2 visible-md"/>
							</h:panelGroup>
							<h:panelGroup layout="block" styleClass="col-md-2 col-lg-4 visible-md visible-lg"
										  rendered="#{empty facesContext.getMessageList('form-sesion')}">
							</h:panelGroup>

							<div class="col-sm-6 col-md-4 col-lg-3">
								<div class="cont-etiqueta altura-linea">
									<label class="etiqueta" for="form-sesion:nombre-usuario">Usuario</label>
								</div>
								<div class="altura-linea" style="margin-left: 70px;">
									<p:inputText styleClass="campo" id="nombre-usuario" value="#{sesionBean.campoNombreUsuario}"
												 pt:required="required"
												 pt:placeholder="Usuario"/>
								</div>
							</div>
							<div class="col-sm-6 col-md-4 col-lg-3">
								<div class="cont-etiqueta altura-linea">
									<label class="etiqueta" for="form-sesion:contrasena-usuario">Contrase単a</label>
								</div>
								<div class="altura-linea" style="margin-left: 90px;">
									<p:password styleClass="campo" id="contrasena-usuario" value="#{sesionBean.campoContrasena}"
												pt:required="required"
												pt:placeholder="Contrase単a"/>
								</div>
							</div>

							<div class="col-sm-12 col-md-2 altura-linea">
								<p:commandButton styleClass="boton-submit" value="Iniciar sesion" ajax="false"
												 action="#{sesionBean.iniciarSesion()}"/>
							</div>
						</c:when>

						<!-- Cerrar sesion -->
						<c:otherwise>
							<div class="col-xs-12 altura-linea alinear-derecha">
								<h:outputText styleClass="nombre-usuario" value="#{sesionBean.usuario.nombre}"/>
								<c:if test="#{view.viewId != '/perfil.xhtml'}">
									<h:link styleClass="link-perfil" outcome="perfil.xhtml" value="perfil"/>
								</c:if>
								<p:commandButton value="Cerrar sesion" ajax="false"
												 action="#{sesionBean.cerrarSesion()}"/>
							</div>
						</c:otherwise>
					</c:choose>
				</div>
			</h:form>
		</div>
	</div>
</ui:composition>
