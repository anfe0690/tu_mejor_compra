<ui:composition xmlns="http://www.w3.org/1999/xhtml"
				xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
				xmlns:h="http://xmlns.jcp.org/jsf/html"
				xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
				xmlns:f="http://xmlns.jcp.org/jsf/core"
				xmlns:p="http://xmlns.jcp.org/jsf/passthrough">
	<div class="grid_24 tema b-sesion">

		<c:if test="#{!sesionBean.sesionIniciada}">
			<button id="contrasenas" class="boton-contrasenas">Contraseñas</button>
		</c:if>
		
		<h:message for="form-sesion" styleClass="mensaje-error sesion-error" showSummary="true" showDetail="false"/>
		<h:form styleClass="form" id="form-sesion" >
			<c:choose>
				<c:when test="#{!sesionBean.sesionIniciada}">
					<f:event type="postValidate" listener="#{sesionBean.validarUsuarioContrasena}"/>
					<span class="etiqueta">Usuario</span>
					<h:inputText styleClass="campo" id="nombre-usuario" value="#{sesionBean.campoNombreUsuario}" p:required="required"/>
					<span class="etiqueta">Contraseña</span>
					<h:inputSecret styleClass="campo" id="contrasena-usuario" value="#{sesionBean.campoContrasena}" p:required="required"/>

					<h:commandButton styleClass="boton-submit" value="Iniciar sesion"  action="#{sesionBean.iniciarSesion()}" />
				</c:when>

				<c:otherwise>
					<h:outputText styleClass="nombre-usuario" value="#{sesionBean.usuario.nombre}"/>
					<c:if test="#{view.viewId != '/perfil.xhtml'}">
						<h:link styleClass="link-perfil" outcome="perfil.xhtml" value="perfil"/>
					</c:if>
					<h:commandButton styleClass="boton-submit" value="Cerrar sesion" action="#{sesionBean.cerrarSesion()}" />
				</c:otherwise>
			</c:choose>
		</h:form>
	</div>
</ui:composition>
